{% schema %}
{
  "name": "Quick View Modal",
  "target": "body",
  "settings": [
    {
      "type": "text",
      "id": "trigger_selector",
      "label": "Tetikleyici CSS Sınıfı",
      "default": ".js-quick-view-trigger"
    },
    {
      "type": "color",
      "id": "btn_color",
      "label": "Buton Rengi",
      "default": "#111111"
    }
  ]
}
{% endschema %}

{{ 'quick-view.css' | asset_url | stylesheet_tag }}

<style>
  :root {
    --qv-btn-color: {{ block.settings.btn_color | default: '#111111' }};
  }
  
  .qv-add-btn {
    background: var(--qv-btn-color);
  }
  
  .qv-spinner {
    border-top-color: var(--qv-btn-color);
  }
</style>

<div id="quick-view-modal" class="qv-modal" aria-hidden="true" style="display: none;" data-trigger-selector="{{ block.settings.trigger_selector | default: '.js-quick-view-trigger' }}">
  <div class="qv-overlay" data-close></div>
  <div class="qv-container">
    <div class="qv-drag-handle" data-close></div>
    <button class="qv-close" data-close>
      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M18 6L6 18M6 6l12 12"></path></svg>
    </button>
    
    <div class="qv-content">
       <div class="qv-loading">
          <div class="qv-spinner"></div>
       </div>
       
       <div class="qv-body" style="display:none;">
          <!-- Desktop: Image Left with Arrows -->
          <div class="qv-image-col">
             <div class="qv-image-wrapper">
                 <button class="qv-arrow qv-prev" id="qv-prev-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 18l-6-6 6-6"/></svg>
                 </button>
                 <img id="qv-main-image" src="" alt="Ürün Görseli">
                 <button class="qv-arrow qv-next" id="qv-next-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 18l6-6-6-6"/></svg>
                 </button>
             </div>
          </div>
          
          <!-- Shared Info Col -->
          <div class="qv-info-col">
             
             <!-- Mobile Header -->
             <div class="qv-mobile-header">
                 <div class="qv-mob-img-wrap">
                    <img id="qv-mobile-image" src="" alt="">
                 </div>
                 <div class="qv-mob-info">
                    <div id="qv-vendor-mob" class="qv-vendor-tag"></div>
                    <div id="qv-title-mob" class="qv-product-title"></div>
                    <div class="qv-price-wrapper">
                         <span class="qv-price"></span>
                         <span class="qv-compare-price"></span>
                    </div>
                 </div>
             </div>

             <!-- Desktop Header -->
             <div class="qv-desktop-header">
                 <span id="qv-vendor" class="qv-vendor-tag"></span>
                 <h2 id="qv-title" class="qv-product-title"></h2>
                 <div class="qv-price-wrapper">
                    <span class="qv-price"></span>
                    <span class="qv-compare-price"></span>
                 </div>
             </div>

             <form id="qv-form">
                <input type="hidden" name="id" id="qv-variant-id">
                <div id="qv-options" class="qv-options"></div>

                <div class="qv-shipping-box">
                   <div class="qv-shipping-title">TAHMİNİ KARGOYA TESLİM</div>
                   <div id="qv-delivery-date" class="qv-shipping-date"></div>
                </div>

                <div class="qv-footer-actions">
                   <button type="submit" id="qv-add-btn" class="qv-add-btn">SEPETE EKLE</button>
                   <a href="#" class="qv-details-btn" id="qv-details-btn" aria-label="Ürün Detayına Git">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M14 5l7 7m0 0l-7 7m7-7H3"></path></svg>
                   </a>
                </div>
             </form>
          </div>
       </div>
    </div>
  </div>
</div>

<script src="{{ 'quick-view.js' | asset_url }}" defer></script>
